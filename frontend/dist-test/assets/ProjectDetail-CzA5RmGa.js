import{c as g,r as i,j as e,a as j,u as f,U as y}from"./index-QRPWQ2M1.js";import{X as N,M as m,D as v,a as w,E as k,b as z}from"./jspdf.plugin.autotable-BivYunX_.js";import{L as h}from"./loader-circle-Ce8NWqlS.js";import{A as D,C as P,F as E}from"./file-text-DtOCV-xh.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=g("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=g("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),M=({images:n,onDelete:l})=>{const[s,o]=i.useState(null);return n.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:n.map(r=>e.jsxs("div",{className:"group relative aspect-square rounded-xl overflow-hidden border border-gray-200 shadow-sm bg-gray-100 cursor-pointer",onClick:()=>o(r),children:[e.jsx("img",{src:r.url||"",alt:"Project Image",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(I,{className:"text-white drop-shadow-md",size:24})})]},r.id))}),s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-fadeIn",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 p-2",children:e.jsx(N,{size:32})}),e.jsxs("div",{className:"relative max-w-4xl w-full max-h-[90vh] flex flex-col items-center",children:[e.jsx("img",{src:s.url||"",alt:"Full View",className:"max-w-full max-h-[80vh] rounded-lg shadow-2xl"}),e.jsxs("div",{className:"w-full flex justify-between items-center mt-4 px-4",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:new Date(s.createdAt).toLocaleDateString()}),l&&e.jsxs("button",{onClick:r=>{r.stopPropagation(),window.confirm("¿Eliminar esta imagen permanentemente?")&&(l(s.id),o(null))},className:"bg-red-500/20 text-red-400 border border-red-500/50 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-red-500 hover:text-white transition-colors",children:[e.jsx(S,{size:16})," Eliminar"]})]})]})]})]})};function G(){const{id:n}=j(),l=f(),[s,o]=i.useState(null),[r,$]=i.useState(!0),[d,c]=i.useState(!1);i.useEffect(()=>{async function t(){}t()},[n,l]);const p=()=>{if(s){c(!0);try{const t=new k;t.setFontSize(20),t.text("Medidor de Hoteles Egea DEV",14,22),t.setFontSize(12),t.text(`Proyecto: ${s.location}`,14,32),t.text(`Responsable: ${s.firstName} ${s.lastName}`,14,38),t.text(`Fecha: ${new Date(s.date).toLocaleDateString()}`,14,44);const b=(s.measurements||[]).map((a,u)=>{var x;return[u+1,a.floor,a.roomNumber,a.room,((x=a.type)==null?void 0:x.label)||"Otro",`${a.width}x${a.height}${a.depth?"x"+a.depth:""} cm`]});z(t,{head:[["#","Planta","Nº Hab","Estancia","Elemento","Medidas"]],body:b,startY:55,theme:"grid",headStyles:{fillColor:[128,55,70]}}),t.save(`Proyecto_${s.location}_${Date.now()}.pdf`)}finally{c(!1)}}};return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-50",children:e.jsx(h,{className:"animate-spin text-brand-500",size:40})}):s?e.jsx("div",{className:"min-h-screen bg-brand-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>l("/projects"),className:"flex items-center gap-2 text-brand-600 font-medium mb-6 hover:underline",children:[e.jsx(D,{size:18})," Volver al listado"]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100",children:[e.jsxs("div",{className:"bg-brand-900 p-8 text-white relative isolate overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-50%] right-[-50%] w-[100%] h-[100%] bg-gradient-to-br from-white/10 to-transparent rounded-full blur-3xl -z-10"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.location}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-brand-100 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{size:14})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{size:14})," ",s.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{size:14})," ",s.firstName," ",s.lastName]})]})]}),e.jsxs("button",{onClick:p,disabled:d,className:"bg-white text-brand-900 px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-brand-50 transition-colors shadow-lg active:scale-95 disabled:opacity-70",children:[d?e.jsx(h,{className:"animate-spin",size:20}):e.jsx(v,{size:20}),"Exportar PDF"]})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("section",{className:"mb-10",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"text-brand-500",size:20})," Mediciones Registradas"]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-100",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-[10px] font-bold tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Ubicación"}),e.jsx("th",{className:"px-6 py-4",children:"Elemento"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Medidas (cm)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:(s.measurements||[]).map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-gray-900",children:["Planta ",t.floor,", Hab ",t.room_number]}),e.jsx("div",{className:"text-gray-500 text-xs",children:t.room})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-700",children:t.product_label||"Otro"}),t.observations&&e.jsxs("div",{className:"text-xs text-brand-600 flex items-center gap-1 mt-1",children:[e.jsx(w,{size:10})," ",t.observations]})]}),e.jsxs("td",{className:"px-6 py-4 text-right font-mono font-bold text-gray-900",children:[t.width,"x",t.height,t.depth?`x${t.depth}`:""]})]},t.id))})]})})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"text-brand-500",size:20})," Galería de Imágenes"]}),s.images&&s.images.length>0?e.jsx(M,{images:s.images}):e.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-2xl p-12 text-center text-gray-400",children:"No hay imágenes para este proyecto"})]})]})]})]})}):null}export{G as default};
